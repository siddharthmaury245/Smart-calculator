<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Smart Calculator for online</title><link rel="preconnect" href="https://www.highperformanceformat.com" crossorigin>
<link rel="dns-prefetch" href="https://www.highperformanceformat.com">
<link rel="preload" as="script" href="https://www.highperformanceformat.com/2208698be480b96ef22a16f1a9ae961e/invoke.js">
<link rel="preload" as="script" href="https://www.highperformanceformat.com/62d328054d2f80fa55a4c7d88f3a64c4/invoke.js">
    
    <meta name="description" content="Smart Calculator with Unit Converter, EMI Planner, and Bill Estimator.">
    
    <style>
        /* =========================================
           1. CSS VARIABLES & THEMING
           ========================================= */
        :root {
            --bg: #f4f6f9;
            --fg: #1a1a1a;
            --surface: #ffffff;
            --btn-bg: #eef2f5;
            --btn-shadow-dark: #d1d9e6;
            --btn-shadow-light: #ffffff;
            --accent: #ff6600;
            --accent-text: #fff;
            --border: rgba(0,0,0,0.1);
        }

        body.dark {
            --bg: #121212;
            --fg: #e0e0e0;
            --surface: #1e1e1e;
            --btn-bg: #2d2d2d;
            --btn-shadow-dark: #000000;
            --btn-shadow-light: #333333;
            --accent: #00a8ff;
            --accent-text: #000;
            --border: rgba(255,255,255,0.1);
        }

        /* =========================================
           2. GLOBAL STYLES & RESET
           ========================================= */
        * {
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            outline: none;
        }

        body {
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg);
            color: var(--fg);
            height: 100vh;
            height: 100dvh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            transition: background 0.3s, color 0.3s;
        }

        @media (min-width: 700px) {
            body {
                max-width: 400px;
                height: 90vh;
                margin: 5vh auto;
                border: 1px solid var(--border);
                border-radius: 20px;
                box-shadow: 0 10px 40px rgba(0,0,0,0.3);
                position: relative;
            }
            html {
                background: #333;
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }
        }

        /* =========================================
           3. NAVIGATION BAR
           ========================================= */
        .nav-bar {
            display: flex;
            background: var(--surface);
            padding: 8px;
            flex-shrink: 0;
            z-index: 50;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .nav-item {
            flex: 1;
            text-align: center;
            padding: 10px;
            font-size: 14px;
            font-weight: 600;
            color: var(--fg);
            opacity: 0.6;
            cursor: pointer;
            border-radius: 10px;
            transition: all 0.2s ease;
        }

        .nav-item.active {
            background: var(--accent);
            color: var(--accent-text);
            opacity: 1;
            transform: scale(1.02);
        }

        /* =========================================
           4. PAGE LAYOUTS
           ========================================= */
        .app-container {
            flex: 1;
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .page {
            display: none;
            height: 100%;
            width: 100%;
            flex-direction: column;
            padding: 15px;
            overflow-y: auto; /* Scroll enabled for all pages */
            padding-bottom: 70px;
            animation: fadeIn 0.3s ease-out;
        }

        .page.active {
            display: flex;
        }

        .page.scrollable {
            overflow-y: auto;
            padding-bottom: 20px;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* =========================================
           5. CALCULATOR UI COMPONENTS
           ========================================= */
        .top-toolbar {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            flex-shrink: 0;
        }

        .icon-btn {
            background: var(--btn-bg);
            border: none;
            padding: 8px 15px;
            border-radius: 8px;
            font-size: 12px;
            font-weight: bold;
            cursor: pointer;
            color: var(--fg);
            box-shadow: 3px 3px 6px var(--btn-shadow-dark), 
                       -3px -3px 6px var(--btn-shadow-light);
            transition: all 0.1s;
        }

        .icon-btn:active {
            box-shadow: inset 2px 2px 5px var(--btn-shadow-dark);
            transform: translateY(1px);
        }

        .display-screen {
            width: 100%;
            background: var(--surface);
            padding: 15px;
            border-radius: 15px;
            text-align: right;
            font-size: 36px;
            border: none;
            color: var(--fg);
            box-shadow: inset 3px 3px 6px var(--btn-shadow-dark), 
                        inset -3px -3px 6px var(--btn-shadow-light);
            margin-bottom: 15px;
            flex-shrink: 0;
            height: 80px;
            letter-spacing: 1px;
        }

        .keypad {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            flex-shrink: 0;
            margin-bottom: 10px;
            min-height: 380px;
        }

        .key {
            border: none;
            border-radius: 12px;
            background: var(--btn-bg);
            color: var(--fg);
            font-size: 22px;
            font-weight: 500;
            cursor: pointer;
            box-shadow: 4px 4px 8px var(--btn-shadow-dark), 
                       -4px -4px 8px var(--btn-shadow-light);
            transition: all 0.1s;
            display: flex;
            align-items: center;
            justify-content: center;
            user-select: none;
        }

        .key:active {
            transform: scale(0.95);
            box-shadow: inset 3px 3px 6px var(--btn-shadow-dark);
        }

        .key.accent { background: var(--accent); color: var(--accent-text); }
        .key.action { color: var(--accent); font-weight: bold; }

        /* =========================================
           6. ADVERTISING CONTAINER (Responsive)
           ========================================= */
        .ad-container {
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            background: var(--surface);
            border-radius: 12px;
            margin-top: 10px;
            padding: 5px;
            border: 1px dashed var(--border);
            overflow: hidden;
            flex-shrink: 0;
        }

        /* Specific styles for Small vs Large ads */
        .ad-small { min-height: 60px; }
        .ad-large { min-height: 260px; }

        /* =========================================
           7. INPUT FORMS (Converter, EMI, Bill)
           ========================================= */
        .input-group { margin-bottom: 15px; }
        label { display: block; font-size: 13px; font-weight: bold; margin-bottom: 8px; opacity: 0.8; padding-left: 5px; }
        input, select { width: 100%; padding: 15px; border-radius: 12px; border: none; background: var(--surface); color: var(--fg); font-size: 16px; appearance: none; box-shadow: inset 2px 2px 5px var(--btn-shadow-dark), inset -2px -2px 5px var(--btn-shadow-light); }
        h2 { text-align: center; margin-bottom: 20px; color: var(--accent); font-weight: 600; text-transform: uppercase; font-size: 18px; letter-spacing: 1px; }
        .result-box { text-align: center; margin-top: 20px; padding: 15px; background: var(--surface); border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); }

        /* =========================================
           8. FOOTER & MODALS
           ========================================= */
        .nexacore-footer { background: var(--surface); padding: 10px; text-align: center; font-size: 10px; color: var(--fg); flex-shrink: 0; border-top: 1px solid var(--border); }
        .footer-links { display: flex; justify-content: center; gap: 20px; margin-top: 5px; opacity: 0.7; }
        .footer-links span { cursor: pointer; text-decoration: underline; }
        .modal-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 200; align-items: center; justify-content: center; backdrop-filter: blur(4px); }
        .modal-box { background: var(--bg); padding: 25px; border-radius: 20px; width: 85%; max-width: 350px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); text-align: center; }
        .modal-box h3 { color: var(--accent); margin-top: 0; }

        /* =========================================
           9. HISTORY PANEL
           ========================================= */
        .history-panel { position: fixed; bottom: 0; left: 0; width: 100%; height: 65%; background: var(--surface); z-index: 100; transform: translateY(110%); transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); display: flex; flex-direction: column; padding: 20px; border-top-left-radius: 25px; border-top-right-radius: 25px; box-shadow: 0 -10px 40px rgba(0,0,0,0.3); }
        .history-panel.open { transform: translateY(0); }
        .history-list { flex: 1; overflow-y: auto; margin-top: 15px; padding-right: 5px; }
        .history-item { padding: 12px; border-bottom: 1px solid var(--border); display: flex; justify-content: space-between; font-size: 18px; cursor: pointer; }
        .history-item:hover { background: rgba(0,0,0,0.02); }
    </style>
</head>
<body onload="initApp()">

    <div class="nav-bar">
        <div class="nav-item active" onclick="switchPage('calc')">Calculator</div>
        <div class="nav-item" onclick="switchPage('conv')">Converter</div>
        <div class="nav-item" onclick="switchPage('emi')">EMI</div>
        <div class="nav-item" onclick="switchPage('bill')">Bill</div>
    </div>

    <div class="app-container">
        
        <div id="calc" class="page active">
            <div class="top-toolbar">
                <button class="icon-btn" onclick="toggleHistoryPanel()">ðŸ“œ HISTORY</button>
                <button class="icon-btn" onclick="toggleTheme()">ðŸŒ— THEME</button>
            </div>

            <input type="text" id="display" class="display-screen" readonly placeholder="0">

            <div class="keypad">
                <button class="key action" onclick="clearDisplay()">AC</button>
                <button class="key action" onclick="delChar()">âŒ«</button>
                <button class="key action" onclick="append('%')">%</button>
                <button class="key action" onclick="append('/')">Ã·</button>
                <button class="key" onclick="append('7')">7</button>
                <button class="key" onclick="append('8')">8</button>
                <button class="key" onclick="append('9')">9</button>
                <button class="key action" onclick="append('*')">Ã—</button>
                <button class="key" onclick="append('4')">4</button>
                <button class="key" onclick="append('5')">5</button>
                <button class="key" onclick="append('6')">6</button>
                <button class="key action" onclick="append('-')">âˆ’</button>
                <button class="key" onclick="append('1')">1</button>
                <button class="key" onclick="append('2')">2</button>
                <button class="key" onclick="append('3')">3</button>
                <button class="key action" onclick="append('+')">+</button>
                <button class="key" onclick="append('0')" style="grid-column: span 2">0</button>
                <button class="key" onclick="append('.')">.</button>
                <button class="key accent" onclick="calculate()">=</button>
            </div>
            
            <div class="ad-container ad-small">
                <iframe 
                    title="Ad-Small"
                    width="320" 
                    height="50" 
                    frameborder="0" 
                    scrolling="no" 
                    style="border:none; overflow:hidden;"
                    sandbox="allow-scripts allow-same-origin allow-popups"
                    srcdoc="
                        <body style='margin:0; padding:0; display:flex; justify-content:center; align-items:center; background:transparent;'>
                            <script type='text/javascript'>
                                atOptions = {
                                    'key' : '2208698be480b96ef22a16f1a9ae961e',
                                    'format' : 'iframe',
                                    'height' : 50,
                                    'width' : 320,
                                    'params' : {}
                                };
                            </script>
                            <script type='text/javascript' src='https://www.highperformanceformat.com/2208698be480b96ef22a16f1a9ae961e/invoke.js'></script>
                        </body>
                    ">
                </iframe>
            </div>
        </div>

        <div id="conv" class="page scrollable">
            <h2>Unit Converter</h2>
            <div class="input-group">
                <label>Category</label>
                <select id="convType" onchange="populateUnits()">
                    <option value="length">Length (Meter/Feet)</option>
                    <option value="mass">Mass (Kg/Pounds)</option>
                    <option value="temp">Temperature (C/F)</option>
                    <option value="data">Data (MB/GB)</option>
                </select>
            </div>
            <div class="input-group"><label>Input Value</label><input type="number" id="convInput" placeholder="Enter Value" oninput="doConvert()"></div>
            <div class="input-group" style="display:flex; gap:15px;">
                <div style="flex:1"><label>From</label><select id="convFrom" onchange="doConvert()"></select></div>
                <div style="flex:1"><label>To</label><select id="convTo" onchange="doConvert()"></select></div>
            </div>
            <div class="input-group"><label>Result</label><input type="text" id="convResult" readonly style="font-weight:bold; color:var(--accent); font-size:20px;"></div>

            <div class="ad-container ad-large">
                <iframe 
                    title="Ad-Large"
                    width="300" 
                    height="250" 
                    frameborder="0" 
                    scrolling="no" 
                    style="border:none; overflow:hidden;"
                    sandbox="allow-scripts allow-same-origin allow-popups"
                    srcdoc="
                        <body style='margin:0; padding:0; display:flex; justify-content:center; align-items:center; background:transparent;'>
                            <script type='text/javascript'>
                                atOptions = {
                                    'key' : '62d328054d2f80fa55a4c7d88f3a64c4',
                                    'format' : 'iframe',
                                    'height' : 250,
                                    'width' : 300,
                                    'params' : {}
                                };
                            </script>
                            <script type='text/javascript' src='https://www.highperformanceformat.com/62d328054d2f80fa55a4c7d88f3a64c4/invoke.js'></script>
                        </body>
                    ">
                </iframe>
            </div>
        </div>

        <div id="emi" class="page scrollable">
            <h2>EMI Loan Planner</h2>
            <div class="input-group"><label>Loan Amount (â‚¹)</label><input type="number" id="emiP" placeholder="e.g. 50000"></div>
            <div class="input-group"><label>Interest Rate (%)</label><input type="number" id="emiR" placeholder="e.g. 12"></div>
            <div class="input-group"><label>Duration (Years)</label><input type="number" id="emiN" placeholder="e.g. 2"></div>
            <button class="key accent" style="width:100%; padding:15px; margin-top:10px;" onclick="calculateEMI()">CALCULATE EMI</button>
            <div class="result-box"><div style="font-size:14px; opacity:0.7;">Your Monthly Payment</div><div id="emiResult" style="font-size:28px; font-weight:bold; color:var(--accent);">â‚¹ 0.00</div></div>

            <div class="ad-container ad-large">
                <iframe 
                    title="Ad-Large"
                    width="300" 
                    height="250" 
                    frameborder="0" 
                    scrolling="no" 
                    style="border:none; overflow:hidden;"
                    sandbox="allow-scripts allow-same-origin allow-popups"
                    srcdoc="
                        <body style='margin:0; padding:0; display:flex; justify-content:center; align-items:center; background:transparent;'>
                            <script type='text/javascript'>
                                atOptions = {
                                    'key' : '62d328054d2f80fa55a4c7d88f3a64c4',
                                    'format' : 'iframe',
                                    'height' : 250,
                                    'width' : 300,
                                    'params' : {}
                                };
                            </script>
                            <script type='text/javascript' src='https://www.highperformanceformat.com/62d328054d2f80fa55a4c7d88f3a64c4/invoke.js'></script>
                        </body>
                    ">
                </iframe>
            </div>
        </div>

        <div id="bill" class="page scrollable">
            <h2>Electricity Bill</h2>
            <div class="input-group">
                <label>Region</label>
                <select id="billRegion" onchange="updateBillCats()">
                    <option value="India">India (State Boards)</option>
                    <option value="USA">USA (Average)</option>
                    <option value="UK">UK (Standard)</option>
                </select>
            </div>
            <div class="input-group"><label>Connection Type</label><select id="billCat" onchange="updateBillRate()"></select></div>
            <div class="input-group" style="display:flex; gap:15px;"><div style="flex:1"><label>Units</label><input type="number" id="billUnits" placeholder="0"></div><div style="flex:1"><label>Rate</label><input type="number" id="billRate" placeholder="0.00"></div></div>
            <button class="key accent" style="width:100%; padding:15px; margin-top:10px;" onclick="calculateBill()">CALCULATE BILL</button>
            <div class="result-box"><div id="billTotal" style="font-size:24px; font-weight:bold; color:var(--fg);">Total: 0.00</div></div>

            <div class="ad-container ad-large">
                <iframe 
                    title="Ad-Large"
                    width="300" 
                    height="250" 
                    frameborder="0" 
                    scrolling="no" 
                    style="border:none; overflow:hidden;"
                    sandbox="allow-scripts allow-same-origin allow-popups"
                    srcdoc="
                        <body style='margin:0; padding:0; display:flex; justify-content:center;  background:transparent;'>
                            <script type='text/javascript'>
                                atOptions = {
                                    'key' : '62d328054d2f80fa55a4c7d88f3a64c4',
                                    'format' : 'iframe',
                                    'height' : 250,
                                    'width' : 300,
                                    'params' : {}
                                };
                            </script>
                            <script type='text/javascript' src='https://www.highperformanceformat.com/62d328054d2f80fa55a4c7d88f3a64c4/invoke.js'></script>
                        </body>
                    ">
                </iframe>
            </div>
       </div>

    </div>

    <div class="nexacore-footer">
        <div style="margin-bottom:8px; font-weight:bold;">Powered by NEXACORE</div>
        <div class="footer-links">
            <span onclick="openModal('privacy')">Privacy</span>
            <span onclick="openModal('terms')">Terms</span>
            <span onclick="openModal('about')">About</span>
        </div>
    </div>

    <div id="historyPanel" class="history-panel">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:15px;">
            <h3 style="margin:0; color:var(--accent);">Calculation History</h3>
            <button onclick="clearHistory()" style="background:#ff4444; color:white; border:none; padding:8px 15px; border-radius:8px; cursor:pointer;">Clear</button>
        </div>
        <div id="historyList" class="history-list"></div>
        <button onclick="toggleHistoryPanel()" style="padding:15px; margin-top:15px; background:var(--btn-bg); border:none; border-radius:12px; color:var(--fg); font-weight:bold;">CLOSE PANEL</button>
    </div>

    <div id="modal-privacy" class="modal-overlay" onclick="closeModal('privacy')">
        <div class="modal-box" onclick="event.stopPropagation()">
            <h3>Privacy Policy</h3>
            <p style="opacity:0.8; line-height:1.5;">We respect your privacy. All calculations are performed locally on your device. We use third-party advertising (Adsterra) which may use cookies to serve relevant ads.</p>
            <button onclick="closeModal('privacy')" style="width:100%; padding:12px; background:var(--accent); border:none; color:white; border-radius:10px; margin-top:15px;">Close</button>
        </div>
    </div>

    <div id="modal-terms" class="modal-overlay" onclick="closeModal('terms')">
        <div class="modal-box" onclick="event.stopPropagation()">
            <h3>Terms of Use</h3>
            <p style="opacity:0.8; line-height:1.5;">This tool is provided "as is". NEXACORE is not liable for any financial losses due to calculation errors. Please verify results before making financial decisions.</p>
            <button onclick="closeModal('terms')" style="width:100%; padding:12px; background:var(--accent); border:none; color:white; border-radius:10px; margin-top:15px;">Close</button>
        </div>
    </div>

    <div id="modal-about" class="modal-overlay" onclick="closeModal('about')">
        <div class="modal-box" onclick="event.stopPropagation()">
            <h3>About NEXACORE</h3>
            <p style="opacity:0.8; line-height:1.5;">NEXACORE builds high-performance digital utilities for students and professionals. Version 2.0 (Jarvis Edition).</p>
            <button onclick="closeModal('about')" style="width:100%; padding:12px; background:var(--accent); border:none; color:white; border-radius:10px; margin-top:15px;">Close</button>
        </div>
    </div>

    <script>
        // --- 1. INITIALIZATION & THEME ---
        function initApp() {
            if(localStorage.getItem('theme') === 'dark') {
                document.body.classList.add('dark');
            }
            populateUnits(); 
            updateBillCats();
        }

        function toggleTheme() {
            let isDark = document.body.classList.toggle('dark');
            localStorage.setItem('theme', isDark ? 'dark' : 'light');
        }

        // --- 2. PAGE NAVIGATION ---
        function switchPage(pageId) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            document.getElementById(pageId).classList.add('active');
            
            const navItems = document.querySelectorAll('.nav-item');
            if(pageId === 'calc') navItems[0].classList.add('active');
            if(pageId === 'conv') navItems[1].classList.add('active');
            if(pageId === 'emi') navItems[2].classList.add('active');
            if(pageId === 'bill') navItems[3].classList.add('active');
        }

        // --- 3. CALCULATOR LOGIC ---
        function append(val) { document.getElementById('display').value += val; }
        function clearDisplay() { document.getElementById('display').value = ''; }
        function delChar() {
            let current = document.getElementById('display').value;
            document.getElementById('display').value = current.slice(0, -1);
        }
        function calculate() {
            try {
                let expression = document.getElementById('display').value;
                if(!expression) return;
                let evalString = expression.replace(/Ã—/g, '*').replace(/Ã·/g, '/');
                let result = eval(evalString);
                saveHistory(expression, result);
                document.getElementById('display').value = result;
            } catch (e) {
                document.getElementById('display').value = 'Error';
            }
        }

        // --- 4. HISTORY SYSTEM ---
        function saveHistory(expr, res) {
            let history = JSON.parse(localStorage.getItem('calcHistory') || '[]');
            history.unshift({ expr: expr, res: res });
            if(history.length > 20) history.pop(); 
            localStorage.setItem('calcHistory', JSON.stringify(history));
        }

        function renderHistory() {
            let list = document.getElementById('historyList');
            list.innerHTML = '';
            let history = JSON.parse(localStorage.getItem('calcHistory') || '[]');
            if(history.length === 0) {
                list.innerHTML = '<div style="text-align:center; opacity:0.5; padding:20px;">No History Available</div>';
                return;
            }
            history.forEach(item => {
                let div = document.createElement('div');
                div.className = 'history-item';
                div.innerHTML = `<span>${item.expr}</span> <span style="color:var(--accent); font-weight:bold;">= ${item.res}</span>`;
                div.onclick = () => {
                    document.getElementById('display').value = item.res;
                    toggleHistoryPanel();
                };
                list.appendChild(div);
            });
        }
        function toggleHistoryPanel() {
            let panel = document.getElementById('historyPanel');
            if(panel.classList.contains('open')) panel.classList.remove('open');
            else { renderHistory(); panel.classList.add('open'); }
        }
        function clearHistory() { localStorage.removeItem('calcHistory'); renderHistory(); }

        // --- 5. UNIT CONVERTER LOGIC ---
        const convData = {
            length: { isTemp: false, units: {'Meter': 1, 'Kilometer': 1000, 'Centimeter': 0.01, 'Feet': 0.3048, 'Inch': 0.0254, 'Yard': 0.9144} },
            mass: { isTemp: false, units: {'Kilogram': 1, 'Gram': 0.001, 'Pound': 0.453592, 'Ounce': 0.0283495} },
            data: { isTemp: false, units: {'Megabyte (MB)': 1, 'Gigabyte (GB)': 1024, 'Terabyte (TB)': 1048576, 'Kilobyte (KB)': 0.0009765625} },
            temp: { isTemp: true, units: ['Celsius', 'Fahrenheit', 'Kelvin'] }
        };
        function populateUnits() {
            let type = document.getElementById('convType').value;
            let fromSelect = document.getElementById('convFrom');
            let toSelect = document.getElementById('convTo');
            fromSelect.innerHTML = ''; toSelect.innerHTML = '';
            let unitsList = convData[type].isTemp ? convData[type].units : Object.keys(convData[type].units);
            unitsList.forEach(u => { fromSelect.add(new Option(u, u)); toSelect.add(new Option(u, u)); });
            if(unitsList.length > 1) toSelect.selectedIndex = 1;
            doConvert();
        }
        function doConvert() {
            let type = document.getElementById('convType').value;
            let val = parseFloat(document.getElementById('convInput').value);
            let f = document.getElementById('convFrom').value;
            let t = document.getElementById('convTo').value;
            if (isNaN(val)) { document.getElementById('convResult').value = ''; return; }
            let res;
            if (type === 'temp') {
                if (f === t) res = val;
                else if (f === 'Celsius' && t === 'Fahrenheit') res = (val * 9/5) + 32;
                else if (f === 'Celsius' && t === 'Kelvin') res = val + 273.15;
                else if (f === 'Fahrenheit' && t === 'Celsius') res = (val - 32) * 5/9;
                else if (f === 'Fahrenheit' && t === 'Kelvin') res = ((val - 32) * 5/9) + 273.15;
                else if (f === 'Kelvin' && t === 'Celsius') res = val - 273.15;
                else if (f === 'Kelvin' && t === 'Fahrenheit') res = ((val - 273.15) * 9/5) + 32;
            } else { res = (val * convData[type].units[f]) / convData[type].units[t]; }
            document.getElementById('convResult').value = parseFloat(res.toFixed(4));
        }

        // --- 6. EMI & BILL LOGIC ---
        function calculateEMI() {
            let p = parseFloat(document.getElementById('emiP').value);
            let r = parseFloat(document.getElementById('emiR').value);
            let n = parseFloat(document.getElementById('emiN').value);
            if (!p || !r || !n) { alert("Please fill all EMI fields"); return; }
            let mr = r / 12 / 100;
            let m = n * 12;
            let emi = (p * mr * Math.pow(1 + mr, m)) / (Math.pow(1 + mr, m) - 1);
            document.getElementById('emiResult').innerHTML = "â‚¹ " + emi.toFixed(2);
        }
        const billData = { "India": { c: "â‚¹", cats: { "Domestic (Home)": 7.50, "Commercial (Shop)": 12.00, "Industrial": 10.50 } }, "USA": { c: "$", cats: { "Residential": 0.15, "Business": 0.20 } }, "UK": { c: "Â£", cats: { "Standard": 0.34, "Economy 7": 0.20 } } };
        function updateBillCats() {
            let r = document.getElementById('billRegion').value;
            let s = document.getElementById('billCat');
            s.innerHTML = '';
            for (let c in billData[r].cats) s.add(new Option(c, c));
            updateBillRate();
        }
        function updateBillRate() {
            let r = document.getElementById('billRegion').value;
            let c = document.getElementById('billCat').value;
            document.getElementById('billRate').value = billData[r].cats[c];
        }
        function calculateBill() {
            let u = parseFloat(document.getElementById('billUnits').value);
            let r = parseFloat(document.getElementById('billRate').value);
            let region = document.getElementById('billRegion').value;
            if (isNaN(u) || isNaN(r)) return;
            document.getElementById('billTotal').innerHTML = "Total: " + billData[region].c + " " + (u * r).toFixed(2);
        }

        // --- 8. MODAL LOGIC ---
        function openModal(id) { document.getElementById('modal-' + id).style.display = 'flex'; }
        function closeModal(id) { document.getElementById('modal-' + id).style.display = 'none'; }
    </script>
</body>
</html>

